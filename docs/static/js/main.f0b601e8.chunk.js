(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,t,a){e.exports=a.p+"static/media/mask.25e49c8a.png"},216:function(e,t,a){e.exports=a(416)},416:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(43),o=a.n(i),l=a(198),c=a(199),s=a.n(c),u=a(5),m=a(6),d=a(25),h=a(23),p=a(26),v=a(424),f=a(425),g=a(420),y=a(421),E=a(422),b=a(423),C=a(203),w=a.n(C),O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).video=r.a.createRef(),a.state={error:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){e.video.current.srcObject=t}).catch(function(t){e.setState({error:!0}),console.error("SimpleCallApp",t)})}},{key:"componentWillMount",value:function(){var e=this.video.current;e&&e.srcObject&&e.srcObject.getTracks().forEach(function(e){return e.stop()})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("video",{ref:this.video,playsInline:!0,autoPlay:!0}),this.state.error?r.a.createElement("p",null,"Failed to capture video."):null)}}]),t}(r.a.PureComponent),j=(a(112),a(232),a(233),a(201)),k=a.n(j),S=a(202),x=a.n(S),R={width:426,height:240,muted:!0},z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).merger=null,a.video=r.a.createRef(),a.originalVideo=r.a.createRef(),a.canvas=r.a.createRef(),a.state={error:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.originalVideo.current,a=this.video.current,n=this.canvas.current,r=n.getContext("2d"),i=new Image;i.src=x.a,navigator.mediaDevices.getUserMedia({video:!0}).then(function(o){t.srcObject=o,e.merger=new k.a(R),e.merger.addStream(o,R);var l=new window.tracking.ObjectTracker("face");l.setInitialScale(4),l.setStepSize(2),l.setEdgesDensity(.1),window.tracking.track("#".concat(t.id),l,{camera:!0});var c=null;l.on("track",function(e){e.data.forEach(function(e){c&&(clearInterval(c),c=null),r.clearRect(0,0,n.width,n.height),r.drawImage(i,e.x,e.y,e.width,e.height),c=setTimeout(function(){r.clearRect(0,0,n.width,n.height)},1e3)})}),e.merger.addStream(n.captureStream(),R),e.merger.start(),a.srcObject=e.merger.result}).catch(function(t){e.setState({error:!0}),console.error("CamEffectApp",t)})}},{key:"componentWillUnmount",value:function(){var e=this.merger,t=this.originalVideo.current,a=this.video.current,n=this.canvas.current;e&&t&&a&&n&&(e._streams.forEach(function(e){e.element.srcObject.getTracks().forEach(function(e){e.stop()})}),t.srcObject&&t.srcObject.getTracks().forEach(function(e){return e.stop()}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("video",{id:"video",ref:this.video,playsInline:!0,autoPlay:!0,width:R.width,height:R.height}),r.a.createElement("video",{id:"original-video",style:{visibility:"hidden",position:"fixed"},ref:this.originalVideo,playsInline:!0,autoPlay:!0,width:R.width,height:R.height}),r.a.createElement("canvas",{id:"canvas",style:{visibility:"hidden",position:"fixed"},ref:this.canvas,width:R.width,height:R.height}),this.state.error?r.a.createElement("p",null,"Failed to capture video."):null)}}]),t}(r.a.PureComponent),D=a(215),I=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={remoteStream:null,clientReady:!1,loadingCall:!1,displaying:""},a.video=r.a.createRef(),a.vertinho=null,a.call=null,a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"bootstrapClient",value:function(){var e=this;this.vertinho||(this.vertinho=new D.a({webSocket:{url:"wss://cantina.freeswitch.org/wss2",login:"1008@cantina.freeswitch.org",password:"1234"},deviceParams:{useMic:"any",useSpeak:"any",useCamera:"any"},remoteVideo:!0,blockSessionRecovery:!0},{onClientReady:function(t){var a=t.reattached_sessions.length;console.log("Client ready, reattaching",a,"sessions"),e.setState({clientReady:!0})},onDisplay:function(t){console.log("Displaying remote video of",t.number),e.setState({loadingCall:!1,displaying:t.number})},onInfo:function(e){return console.log("Info received:",e)},onCallStateChange:function(e){return console.log("Call state changed to",e.current.name)}}))}},{key:"componentDidUpdate",value:function(){this.bootstrapClient(),this.startCall(),this.state.remoteStream&&this.video.current&&!this.video.current.srcObject&&(this.video.current.srcObject=this.state.remoteStream)}},{key:"startCall",value:function(){var e=this;this.state.clientReady&&!this.call&&(this.setState({loadingCall:!0}),this.call=this.vertinho.makeVideoCall({to:"3590",from:"1008",callerName:"Vertinho User"},{playRemoteVideo:function(t){e.setState({remoteStream:t})},stopRemoteVideo:function(){var t=e.state.remoteStream;t&&(t.getTracks().forEach(function(e){return e.stop()}),e.setState({remoteStream:null}))}}))}},{key:"componentWillUnmount",value:function(){this.stopCall()}},{key:"stopCall",value:function(){this.call&&this.call.hangup()}},{key:"render",value:function(){return this.state.loadingCall?r.a.createElement("p",null,"Carregando chamada..."):r.a.createElement("div",null,this.state.clientReady?r.a.createElement("video",{width:640,height:360,ref:this.video,className:"remote-video",autoPlay:!0,playsInline:!0}):r.a.createElement("p",null,"Tentando acessar Vertinho..."))}}]),t}(r.a.Component);a(234);var V=w()({primary:"white",secondary:"#1F2022",tertiary:"#03A9FC",quaternary:"#CECECE"},{primary:"Montserrat",secondary:"Helvetica"}),M=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,{transition:["zoom","slide"],transitionDuration:500,theme:V},r.a.createElement(f.a,{transition:["zoom"],bgColor:"primary"},r.a.createElement(g.a,{size:2,fit:!0,caps:!0,lineHeight:2,textColor:"secondary"},"Demonstra\xe7\xf5es de WebRTC"),r.a.createElement(y.a,{margin:"10px 0 0",textColor:"tertiary",size:1},"Por: ",r.a.createElement("strong",null,"Marcell Guilherme C. da Silva"),",",r.a.createElement("br",null),"Desenvolvedor."),r.a.createElement(y.a,null,r.a.createElement("small",null,"01/02/2019"))),r.a.createElement(f.a,{transition:["fade"],bgColor:"tertiary"},r.a.createElement(g.a,{size:1,textColor:"secondary"},"O que \xe9 WebRTC?"),r.a.createElement(y.a,null,"\xc9 a tecnologia que permite a captura e troca de dados entre aplica\xe7\xf5es web.")),r.a.createElement(f.a,{transition:["fade"],bgColor:"primary",textColor:"tertiary"},r.a.createElement(g.a,{size:6,textColor:"secondary",caps:!0},"Algumas possibilidades"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,"Manipula\xe7\xe3o de microfone e c\xe2mera"),r.a.createElement(b.a,null,"Compartilhamento de tela"),r.a.createElement(b.a,null,"Players de \xe1udio"),r.a.createElement(b.a,null,"Comunica\xe7\xe3o multim\xeddia ponta a ponta"))),r.a.createElement(f.a,{transition:["fade"],bgColor:"primary",textColor:"tertiary"},r.a.createElement(g.a,{size:6,textColor:"secondary",caps:!0},"Aplica\xe7\xf5es conhecidas"),r.a.createElement(E.a,null,r.a.createElement(b.a,null,"WhatsApp"),r.a.createElement(b.a,null,"Skype"),r.a.createElement(b.a,null,"Hangouts"),r.a.createElement(b.a,null,"Facebook"),r.a.createElement(b.a,null,"Evolux"))),r.a.createElement(f.a,{transition:["fade"],bgColor:"secondary",textColor:"primary"},r.a.createElement(g.a,{size:6,textColor:"primary",caps:!0},"Exemplo: capturando v\xeddeo",r.a.createElement(O,null))),r.a.createElement(f.a,{transition:["fade"],bgColor:"secondary",textColor:"primary"},r.a.createElement(g.a,{size:6,textColor:"primary",caps:!0},"Exemplo: filtros",r.a.createElement(z,null))),r.a.createElement(f.a,{transition:["fade"],bgColor:"secondary",textColor:"primary"},r.a.createElement(g.a,{size:6,textColor:"primary",caps:!0},'Exemplo: confer\xeancia ("Vertinho")',r.a.createElement(I,null))))}}]),t}(r.a.Component);o.a.render(r.a.createElement(l.AppContainer,{errorReporter:function(e){var t=e.error;return r.a.createElement(s.a,{error:t})}},r.a.createElement(M,null)),document.getElementById("root"))}},[[216,2,1]]]);
//# sourceMappingURL=main.f0b601e8.chunk.js.map